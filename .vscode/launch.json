{
    "configurations": [
        {
            "name": "modernBERT_long_ctxt_length",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/python_scripts/modernBERT_long_ctxt_length.py",
            "console": "integratedTerminal",
            "justMyCode": false,
            "subProcess": true,
            // Pulled from train_local.sh
            "args": [
                "--tokenizer-path",
                "${workspaceFolder}/char_tokenizer",
                "--train-dataset-path",
                "/home/ubuntu/filesystem1/data/train_representative",
                "--val-dataset-path",
                "/home/ubuntu/filesystem1/data/uniref90_tokenized_8192_small/validation",
                "--vep-input-csv",
                "/home/ubuntu/filesystem1/data/uniref90_tokenized_8192_small/clinvar_AA_zero_shot_input.csv",
                "--run-name",
                "modernBERT-local-test",
                "--output-dir",
                "${workspaceFolder}/checkpoints",
                "--disable-wandb",
                "--max-tokens-per-batch",
                "10000",
                "--max-steps",
                "100"
            ]
        },
        {
            "name": "train_modernBERT",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/python_scripts/train_modernBERT.py",
            "console": "integratedTerminal",
            "justMyCode": false,
            "subProcess": true,
            // Pulled from train_local.sh
            "args": [
                "--tokenizer-path",
                "${workspaceFolder}/char_tokenizer",
                "--train-dataset-path",
                "/home/ubuntu/filesystem1/data/train_representative",
                "--val-dataset-path",
                "/home/ubuntu/filesystem1/data/uniref90_tokenized_8192_small/validation",
                "--vep-input-csv",
                "/home/ubuntu/filesystem1/data/uniref90_tokenized_8192_small/clinvar_AA_zero_shot_input.csv",
                "--run-name",
                "modernBERT-dynamic-batch-test-bucketed",
                "--output-dir",
                "./checkpoints",
                "--max-steps",
                "2000000",
                "--gradient-accumulation-steps",
                "32",
                "--dynamic-batching",
                "--group-by-length=false",
            ]
        },
        {
            "name": "train_lambda.sh (torchrun 8 GPUs)",
            "type": "python",
            "request": "launch",
            "module": "torch.distributed.run",
            "console": "integratedTerminal",
            "justMyCode": false,
            "subProcess": true,
            "env": {
                "WANDB_PROJECT": "huggingface_bert_sweep",
                "WORLD_SIZE": "8",
                "TOKENIZERS_PARALLELISM": "false",
                "MASTER_PORT": "29500"
            },
            // Pulled from train_lambda.sh
            "args": [
                "--nnodes=1",
                "--nproc-per-node=8",
                "${workspaceFolder}/python_scripts/train_modernBERT.py",
                "--run-name",
                "modernBERT-dynamic-batch-test-bucketed",
                "--tokenizer-path",
                "${workspaceFolder}/char_tokenizer",
                "--train-dataset-path",
                "/home/ubuntu/filesystem2/uniref90_tokenized_8192_small/train",
                "--val-dataset-path",
                "/home/ubuntu/filesystem2/uniref90_tokenized_8192_small/validation",
                "--vep-input-csv",
                "/home/ubuntu/filesystem2/uniref90_tokenized_8192_small/clinvar_AA_zero_shot_input.csv",
                "--output-dir",
                "${workspaceFolder}/checkpoints",
                "--max-steps",
                "20000",
                "--dynamic-batching"
            ]
        },
    ]
}